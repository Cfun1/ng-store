<form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="p-5 border rounded">
  <mat-card class="main-container">

    <mat-card-content>
      <mat-form-field appearance="fill">
        <mat-label>Title</mat-label>
        <input matInput formControlName="titleControl" required />
        <mat-error *ngIf="validateRequired('titleControl')">
          Title is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Price</mat-label>
        <input matInput type="number" formControlName="priceControl" required min="1" />
        <span matSuffix>$&nbsp;</span>

        <mat-error *ngIf="validateRequired('priceControl')">
          Price is required
        </mat-error>

        <mat-error *ngIf="validateRange('priceControl')">
          Price must be a positive number
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Description</mat-label>
        <textarea matInput rows="3" formControlName="descriptionControl"></textarea>
      </mat-form-field>

      <!-- <mat-form-field appearance="fill">
        <mat-label>Category</mat-label>
        <input matInput formControlName="category" required />
        <mat-error *ngIf="productForm.get('category')?.hasError('required')">
          Category is required
        </mat-error>
      </mat-form-field> -->

      <mat-form-field appearance="fill">
        <mat-label>Categories</mat-label>
        <mat-chip-list #chipList aria-label="categories selection" formControlName="categoryControl" required>
          <mat-chip *ngFor="let category of categories" (removed)="remove(category)">
            {{category}}
            <button matChipRemove>
              <mat-icon>cancel</mat-icon>
            </button>
          </mat-chip>
          <input placeholder="New category..."
                 [matChipInputFor]="chipList"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 [matChipInputAddOnBlur]="addOnBlur"
                 (matChipInputTokenEnd)="add($event)">
        </mat-chip-list>

        <mat-error *ngIf="productForm.hasError('emptyCategory')">
          Category is required
        </mat-error>
      </mat-form-field>


      <mat-form-field appearance="fill">
        <mat-label>Image URL</mat-label>
        <input matInput formControlName="imageControl" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Rating (Rate)</mat-label>
        <input matInput type="number" formControlName="rateControl" min="0" max="5" />
        <mat-error *ngIf="validateRange('rateControl')">
          Rating must be between 0 and 5
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Rating (Count)</mat-label>
        <input matInput type="number" formControlName="countControl" min="0" />
        <mat-error *ngIf="validateRequired('countControl')">
          Count must be 0 or higher
        </mat-error>
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button color="primary" type="submit" [disabled]="productForm.invalid">Add Product</button>
      <button mat-raised-button color="secondary" type="reset" [disabled]="this?.productForm?.pristine">Clear</button>
    </mat-card-actions>
  </mat-card>
</form>